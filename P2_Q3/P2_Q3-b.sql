-- Dato il seguente schema logico
--    FARMACO(COD_F,NOME_F,DATA_PREPARAZIONE,DATA_SCADENZA,PREZZO)
--    COMPONENTE(COD_C,NOME_C,DESCRIZIONE)
--    CONTIENE(ID_FARMACO,ID_COMPONENTE,QUANTITA_C)
-- si chiede di:
--    b) definire in linguaggio SQL il modello fisico corrispondente tenendo
--       conto dei vincoli di integrit√† referenziali e/o vincoli di dominio;

CREATE TABLE IF NOT EXISTS FARMACO (
  COD_F INTEGER AUTO_INCREMENT PRIMARY KEY,
  NOME_F VARCHAR(50) NOT NULL,
  DATA_PREPARAZIONE DATE NOT NULL,
  DATA_SCADENZA DATE NOT NULL,
  PREZZO DOUBLE NOT NULL
);

CREATE TABLE IF NOT EXISTS COMPONENTE (
  COD_C INTEGER AUTO_INCREMENT PRIMARY KEY,
  NOME_C VARCHAR(50) NOT NULL,
  DESCRIZIONE TEXT NOT NULL -- oppure VARCHAR(100)
);

CREATE TABLE IF NOT EXISTS CONTIENE (
  ID_FARMACO INTEGER NOT NULL,
  ID_COMPONENTE INTEGER NOT NULL,
  QUANTITA_C DOUBLE NOT NULL,
  PRIMARY KEY(ID_FARMACO, ID_COMPONENTE),
  CONSTRAINT "FK_FARMACO" FOREIGN KEY `ID_FARMACO` REFERENCES `FARMACO`(COD_F)
    ON UPDATE CASCADE ON DELETE CASCADE,
  CONSTRAINT "FK_COMPONENTE" FOREIGN KEY `ID_COMPONENTE` REFERENCES `COMPONENTE`(COD_C)
    ON UPDATE CASCADE ON DELETE CASCADE
);
